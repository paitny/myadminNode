import{h as k}from"./moment.9709ab41.js";import{_ as f,r,o as p,c as g,e as s,w as a,F as L,f as W,d as h,b as n,E as H,p as I,a as T,h as U}from"./index.193eeb94.js";const j={name:"swiper",data(){return{urlList:[{id:0},{id:1},{id:2},{id:3},{id:4}],bannerHeight:0,screenWidth:0}},methods:{async getSwiper(){let{data:e}=await this.$axios({method:"GET",url:"/get/swiper"});if(e.code)return this.$message.error(e.msg);this.urlList=e.data}},mounted(){this.getSwiper(),this.screenWidth=window.innerWidth,this.bannerHeight=350/2200*this.screenWidth,window.onresize=()=>{this.screenWidth=window.innerWidth,this.bannerHeight=350/2200*this.screenWidth}}};function E(e,t,i,S,o,l){const u=r("el-carousel-item"),d=r("el-carousel");return p(),g("div",null,[s(d,{height:o.bannerHeight+"px",type:"card"},{default:a(()=>[(p(!0),g(L,null,W(o.urlList,_=>(p(),h(u,{key:_.id},{default:a(()=>[n("div",{class:"img",style:H({backgroundImage:`url(${e.baseURL}${_.swiper})`}),alt:"\u6B63\u5728\u52A0\u8F7D\u4E2D"},null,4)]),_:2},1024))),128))]),_:1},8,["height"])])}const F=f(j,[["render",E],["__scopeId","data-v-3b8d475f"]]);const B={name:"SwiperManger",data(){return{MangerSwiper:[]}},components:{Swiper:F},methods:{dateFormat:function(e,t){let i=e[t.property];return i==null?"":k(i).format("YYYY-MM-DD HH:mm:ss")},async getMangerSwiper(){let{data:e}=await this.$axios({method:"GET",url:"/get/swiper"});this.MangerSwiper=e.data},async swiperUpdate(e,t){let{data:i}=await this.$axios({method:"POST",url:"/adminServer/swiper/update",data:{id:e,doc:t}});if(i.code)return this.$message.error(i.msg);this.$message.success("\u66F4\u65B0\u6210\u529F"),await this.getMangerSwiper()},swiper_before_upload(e,t){/^(\s|\S)+(jpg|png|JPG|PNG)+$/.test(e.name)||(this.$message.error("\u53EA\u80FD\u4E0A\u4F20.png \u6216. jpj\u6587\u4EF6"),t.pop())},swiper_upload_success(e,t){if(e.code)return this.$message.error(e.msg);this.swiperUpdate(t,{swiper:e.url})},async deleteSwiper(e){let{data:t}=await this.$axios({method:"POST",url:"/adminServer/swiper/delete",data:{id:e}});if(t.code)return this.$message.error(t.msg);this.$message.success("\u5220\u9664\u6210\u529F"),await this.getMangerSwiper()}},created(){this.getMangerSwiper()}},C=e=>(I("data-v-e8f504ce"),e=e(),T(),e),D={class:"swiperExhibition"},G={class:"swiper"},N={class:"el-icon-upload"},P=C(()=>n("div",{class:"el-upload__text"},[U("\u5C06.jpj\u6216\u8005png\u6587\u4EF6\u62D6\u5230\u6B64\u5904\uFF0C\u6216"),n("em",null,"\u70B9\u51FB\u4E0A\u4F20")],-1));function R(e,t,i,S,o,l){const u=r("Swiper"),d=r("el-table-column"),_=r("el-image"),b=r("upload-filled"),m=r("el-icon"),$=r("el-upload"),v=r("Delete"),x=r("el-button"),y=r("el-table"),M=r("el-card");return p(),h(M,null,{default:a(()=>[n("div",D,[s(u)]),s(y,{data:o.MangerSwiper,border:""},{default:a(()=>[(p(),h(d,{prop:"date",label:"\u53D1\u5E03\u65E5\u671F",key:o.MangerSwiper.date,formatter:l.dateFormat,align:"center"},null,8,["formatter"])),s(d,{label:"\u91CD\u65B0\u4E0A\u4F20\u8F6E\u64AD\u56FE","min-width":"300",align:"center"},{default:a(c=>[n("div",G,[s(_,{style:{width:"450px",height:"250px"},src:`${e.baseURL}${c.row.swiper}`,"preview-src-list":[`${e.baseURL}${c.row.swiper}`],"preview-teleported":"true",previewTeleported:""},null,8,["src","preview-src-list"]),s($,{class:"upload-demo",drag:"",action:`${e.baseURL}/adminServer/swiper/swiperAdd`,"on-change":l.swiper_before_upload,limit:1,ref:"swiperForm","on-success":function(w){l.swiper_upload_success(w,c.row._id)},"with-credentials":!0},{default:a(()=>[n("i",N,[s(m,{class:"el-icon--upload"},{default:a(()=>[s(b)]),_:1})]),P]),_:2},1032,["action","on-change","on-success"])])]),_:1}),s(d,{fixed:"right",label:"\u64CD\u4F5C",align:"center"},{default:a(c=>[s(x,{style:{width:"50px",height:"50px"},type:"danger",onClick:w=>l.deleteSwiper(c.row._id),size:"large",circle:""},{default:a(()=>[s(m,null,{default:a(()=>[s(v)]),_:1})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})}const V=f(B,[["render",R],["__scopeId","data-v-e8f504ce"]]);export{V as default};
